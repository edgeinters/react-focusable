(this["webpackJsonpreact-focusable-example"]=this["webpackJsonpreact-focusable-example"]||[]).push([[0],{18:function(e,t,n){e.exports=n(25)},25:function(e,t,n){"use strict";n.r(t);var o,s,i=n(0),u=n.n(i),r=n(5),c=n.n(r),a=n(9),l=n(1);function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.HORIZONTAL="HORIZONTAL",e.VERTICAL="VERTICAL",e.UNKNOWN="UNKNOWN"}(o||(o={})),function(e){e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e.UP="UP",e.UNKNOWN="UNKNOWN"}(s||(s={}));var p,g=function(){function e(e,t,n){void 0===n&&(n=null),this._bounds=null,this._enabled=!0,this.key=t,this.parent=e,this._bounds=n,Object(l.f)(this,{_bounds:l.g,_enabled:l.g,bounds:l.c,enabled:l.c,setBounds:l.b,setEnabled:l.b}),this.parent&&this.parent.registerFocusable(this)}var t=e.prototype;return t.setBounds=function(e){this._bounds=e},t.setEnabled=function(e){this._enabled=e},b(e,[{key:"bounds",get:function(){return this._bounds}},{key:"enabled",get:function(){return this._enabled}},{key:"keyPath",get:function(){return this.parent?this.parent.keyPath+"."+this.key:this.key}}]),e}();!function(e){e[e.TO_PARENT=1]="TO_PARENT",e[e.TO_CHILD=-1]="TO_CHILD"}(p||(p={}));var y,x,O,_,m,F=function(e){return{x:e.x,y:e.y}},E=function(e){return{x:e.x+e.width,y:e.y}},w=function(e){return{x:e.x,y:e.y+e.height}},j=function(e){return{x:e.x+e.width,y:e.y+e.height}},k=function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},I=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},T=function(e,t){if(!e.bounds)return{x:0,y:0};var n=N(e,t);return k(d({},e.bounds,n))},N=function(e,t){for(var n=e.bounds?d({},e.bounds):{x:0,y:0},o=e.parent;o;)o.bounds&&(n.x+=o.bounds.x*t,n.y+=o.bounds.y*t),o=o.parent;return n},M=function(e,t){return-e.x*t.y+e.y*t.x>0},P=function(e,t){var n=null,o=null;switch(t){case s.DOWN:n=j(e),o=w(e);break;case s.LEFT:n=w(e),o=F(e);break;case s.RIGHT:n=E(e),o=j(e);break;case s.UP:n=F(e),o=E(e)}var i=k(e);return{maxAngle:o&&Math.atan2(o.y-i.y,o.x-i.x),maxVector:o&&{x:o.x-i.x,y:o.y-i.y},minAngle:n&&Math.atan2(n.y-i.y,n.x-i.x),minVector:n&&{x:n.x-i.x,y:n.y-i.y},x:i.x,y:i.y}},R=function(e,t){var n={x:e.x-t.x,y:e.y-t.y};return!t.maxVector||!t.minVector||!M(t.minVector,n)&&M(t.maxVector,n)},C=new(function(){function e(){var e=this;this._enabled=!1,this._interactive=!1,this.moves=[],this._nextStep=function(){e.currentMove&&(e.currentMove.stepIndex<e.currentMove.steps.length-1?e.currentMove.stepIndex++:e.moves.splice(0,1))},this._previousStep=function(){e.currentMove&&(e.currentMove.stepIndex>0?e.currentMove.stepIndex--:e.log("It is not possible to go to the previous move. Interaction works only within current move"))},Object(l.f)(this,{_enabled:l.g,_interactive:l.g,_nextStep:l.b,currentMove:l.c,lastMove:l.c,moves:l.g,setEnabled:l.b,setInteractive:l.b,stepFrom:l.b,stepOver:l.b}),Object(l.h)((function(){return e.moves.length>0&&e._enabled&&!e._interactive}),(function(t){clearInterval(e._interval),t&&(e._interval=window.setInterval(e._nextStep,300))}))}var t=e.prototype;return t.log=function(e){var t;if(this._enabled){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];(t=console).log.apply(t,["[FocusableDebugger]",e].concat(o))}},t.setEnabled=function(e){this._enabled=e},t.setInteractive=function(e){this._interactive=e},t.stepBackward=function(){this._interactive?this._previousStep():this.log("Interaction is not enabled. Set interactive prop on <FocusableDebugger/>")},t.stepForward=function(){this._interactive?this._nextStep():this.log("Interaction is not enabled. Set interactive prop on <FocusableDebugger/>")},t.stepFrom=function(e,t,n){this._enabled&&(this.moves=[{focusedDistancePoint:n,stepIndex:0,steps:[{focusable:e,frustum:t,options:[]}]}])},t.stepOver=function(e,t,n){var o;this._enabled&&(null===(o=this.lastMove)||void 0===o||o.steps.push({focusable:e,frustum:t,options:n}))},b(e,[{key:"currentMove",get:function(){return this.moves.length&&this.moves[0]||null}},{key:"lastMove",get:function(){return this.moves.length&&this.moves[this.moves.length-1]||null}}]),e}()),A=new(function(){function e(){this.focus(null),Object(l.f)(this,{_currentFocusableIndex:l.g,_focusables:l.g,focus:l.b,focused:l.c,move:l.b,step:l.b})}var t=e.prototype;return t.blur=function(){this.stop(),console.log("blur!")},t.focus=function(e){this.stop(),this._dimension=o.UNKNOWN,this._firstFocusable=e,this._focusables=e?[e]:[],this._currentFocusableIndex=0},t.move=function(e,t){var n,s,i,u;this.hasFocus&&((n=this._dimension)!==(s=t)&&n!==o.UNKNOWN&&s!==o.UNKNOWN&&this.focus(this.focused),i=e,u=this._distance,i*u<0&&this.stop(),this._dimension=t,this._distance+=e,this._timeout||this.step())},t.step=function(){var e=this;if(Math.abs(this._distance)<.5||!this.focused||!this.focused.bounds)return this.stop();var t=this._getFocusableIndexFromHistory();if(t<0){var n,o=P(this.focused.bounds,this.direction);C.stepFrom(this.focused,o,this.focusedDistancePoint);var s=null===(n=this.focused)||void 0===n?void 0:n.parent.getFocusable(o,this.direction);if(!s)return this.stop();this._distance<0?(this._focusables.unshift(s),t=0):(this._focusables.push(s),t=this._focusables.length-1),C.stepOver(this._focusables[t],o,[])}else C.log("using focusable history");this._currentFocusableIndex=t,this._distance=Math.max(Math.abs(this._distance)-1,0)*this.distanceSign,this._timeout=window.setTimeout((function(){return e.step()}),this.stepTime)},t.stop=function(){clearTimeout(this._timeout),this._distance=0,this._timeout=0},t._getFocusableIndexFromHistory=function(){return this._distance>0&&this._currentFocusableIndex<this._focusables.length-1?this._currentFocusableIndex+1:this._distance<0&&this._currentFocusableIndex>0?this._currentFocusableIndex-1:-1},b(e,[{key:"dimension",get:function(){return this._dimension}},{key:"direction",get:function(){return this._dimension===o.VERTICAL?this._distance<0?s.UP:s.DOWN:this._distance<0?s.LEFT:s.RIGHT}},{key:"distanceSign",get:function(){return this._distance<0?-1:1}},{key:"focused",get:function(){return this._focusables[this._currentFocusableIndex]||null}},{key:"focusedDistancePoint",get:function(){return this._firstFocusable&&T(this._firstFocusable,p.TO_PARENT)||{x:0,y:0}}},{key:"hasFocus",get:function(){return null!==this.focused}},{key:"stepTime",get:function(){return 100}}]),e}()),B=function(e){function t(t,n,o){var s;return void 0===o&&(o=null),s=e.call(this,t,n,o)||this,Object(l.f)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(s),{isFocused:l.c}),s}return h(t,e),t.prototype.focus=function(){A.focus(this)},b(t,[{key:"isFocused",get:function(){return A.focused===this}}]),t}(g),L=function(e){return void 0!==e.focus},K=function(e){function t(t,n,o){var s;return void 0===o&&(o=null),(s=e.call(this,t,n,o)||this)._focusables={},s}h(t,e);var n=t.prototype;return n.getFocusable=function(e,t){var n;C.log("getFocusableForContainer",this.keyPath,{frustum:e});var o=this.getFocusableCallback&&this.getFocusableCallback(e,t);if(o)return C.stepOver(this,e,[]),o;var s=Object.values(this.focusables).filter((function(t){return t!==A.focused&&!t.hasFocus&&(t.bounds&&function(e,t){var n=k(e);return R(n,t)}(t.bounds,e))})).sort((function(e,t){return function(e,t,n){var o=T(e,p.TO_PARENT),s=T(t,p.TO_PARENT);return I(o,n)<=I(s,n)?-1:1}(e,t,A.focusedDistancePoint)}));C.stepOver(this,e,s);var i=s[0];return i?L(i)?i:i.getFocusable(function(e,t,n){return t?d({},e,{x:e.x+t.x*n,y:e.y+t.y*n}):e}(e,i.bounds,p.TO_CHILD),t):(null===(n=this.parent)||void 0===n?void 0:n.getFocusable(P(this.bounds,t),t))||null},n.registerFocusable=function(e){console.log("registerFocusable: ",e.key),this._focusables[e.key]=e,!A.hasFocus&&L(e)&&e.enabled&&A.focus(e)},n.unregisterFocusable=function(e){delete this._focusables[e.key],L(e)&&e.isFocused&&A.blur()},n.unregisterFocusableWithKey=function(e){this._focusables[e]&&this.unregisterFocusable(this._focusables[e])},b(t,[{key:"focusables",get:function(){return this._focusables}},{key:"hasFocus",get:function(){return Object.values(this._focusables).some((function(e){return S(e)?e.hasFocus:!!L(e)&&e.isFocused}))}}]),t}(g),S=function(e){return void 0!==e.focusables},H=new(function(e){function t(){var t;return(t=e.call(this,null,"root")||this).setBounds({height:0,width:0,x:0,y:0}),t}h(t,e);var n=t.prototype;return n.down=function(e){void 0===e&&(e=1),A.move(e,o.VERTICAL)},n.left=function(e){void 0===e&&(e=1),A.move(-1*e,o.HORIZONTAL)},n.right=function(e){void 0===e&&(e=1),A.move(e,o.HORIZONTAL)},n.up=function(e){void 0===e&&(e=1),A.move(-1*e,o.VERTICAL)},t}(K)),D=u.a.createContext(H),W=Object(a.a)((function(e){var t=e.children,n=e.defaultFocus,o=e.disabled,s=e.focusableBounds,u=function(e,t){void 0===t&&(t=null);var n=Object(i.useContext)(D),o=Object(i.useState)(),s=o[0],u=o[1];return Object(i.useEffect)((function(){var o=new B(n,e,t);return u(o),function(){return n.unregisterFocusable(o)}}),[]),s}(e.focusableKey,s);if(Object(i.useEffect)((function(){u&&n&&u.focus()}),[u,n]),Object(i.useEffect)((function(){null===u||void 0===u||u.setEnabled(!o)}),[u,o]),Object(i.useEffect)((function(){null===u||void 0===u||u.setBounds(s)}),[s]),u)return"function"===typeof t?t(u):t})),U=function e(t){var n=t.children,o=t.disabled,s=t.focusableBounds,r=t.focusableKey,c=t.getFocusable,a=t.getFocusableOffset,l=function(e,t){void 0===t&&(t=null);var n=Object(i.useContext)(D),o=Object(i.useState)(),s=o[0],u=o[1];return Object(i.useEffect)((function(){var o=new K(n,e,t);return u(o),function(){return o.unregisterFocusable(o)}}),[]),s}(r,s);return Object(i.useEffect)((function(){l&&(l.getFocusableCallback=c,l.getFocusableOffsetCallback=a)}),[e]),Object(i.useEffect)((function(){null===l||void 0===l||l.setEnabled(!o)}),[o]),Object(i.useEffect)((function(){null===l||void 0===l||l.setBounds(s)}),[s]),l?u.a.createElement(D.Provider,{value:l},n):null},V=function(e){e.clearRect(0,0,window.innerWidth,window.innerHeight)},z=function(e,t,n){t.lineWidth=2,t.strokeStyle=n,t.strokeRect(e.x,e.y,e.width,e.height)},G=function(e,t){V(t),function(e,t){t.beginPath(),t.arc(e.x,e.y,5,0,2*Math.PI,!1),t.fillStyle="red",t.fill(),t.stroke()}(e.focusedDistancePoint,t);for(var n=0;n<=e.stepIndex;++n){var o,s=e.steps[n],i=N(s.focusable,p.TO_PARENT);null===(o=s.options)||void 0===o||o.forEach((function(e){z(N(e,p.TO_PARENT),t,"green")})),z(i,t,"red")}},Z=Object(a.a)((function(e){var t,n=e.enabled,o=void 0===n||n,s=e.interactive,r=void 0!==s&&s,c=Object(i.useState)(),a=c[0],l=c[1];return Object(i.useEffect)((function(){return C.setEnabled(o),function(){return C.setEnabled(!1)}}),[o]),Object(i.useEffect)((function(){return C.setInteractive(r),function(){return C.setInteractive(!1)}}),[r]),Object(i.useEffect)((function(){a&&(C.currentMove?G(C.currentMove,a.context):V(a.context))}),[C.currentMove,null===(t=C.currentMove)||void 0===t?void 0:t.stepIndex]),Object(i.useLayoutEffect)((function(){var e=function(){a&&(a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,C.currentMove&&G(C.currentMove,a.context))};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[a]),u.a.createElement("canvas",{ref:function(e){e&&!a&&l({canvas:e,context:e.getContext("2d")})},style:{position:"absolute",zIndex:9999}})})),J=n(4),q=n(2),Q=n(13),X=n(17),Y=n(3),$=["defaultFocus","focusableBounds","index","onFocus"],ee=Y.a.div(y||(y=Object(q.a)(["\n    box-sizing: border-box;\n    padding-right: 20px;\n"]))),te=Y.a.div(x||(x=Object(q.a)(["\n    background-color: rgba(0, 147, 255, ",");\n    border-radius: 10px;\n    height: 100%;\n    width: 100%;\n"])),(function(e){return e.isFocused?1:.4})),ne=function(e){var t=e.defaultFocus,n=e.focusableBounds,o=e.index,s=e.onFocus,i=Object(J.a)(e,$);return u.a.createElement(W,{defaultFocus:t,focusableKey:"item-".concat(o),focusableBounds:n},(function(e){return e.isFocused&&s(o),u.a.createElement(ee,i,u.a.createElement(te,{isFocused:e.isFocused}))}))},oe=["defaultFocus","focusableKey"],se=Object(Y.a)(X.a)(O||(O=Object(q.a)(["\n    margin: 0px;\n"]))),ie=function(e){e.defaultFocus;var t=e.focusableKey,n=Object(J.a)(e,oe),o=Object(i.useRef)(null),s=Object(i.useCallback)((function(e){var t;null===(t=o.current)||void 0===t||t.scrollToItem(e,"auto")}),[o]);return u.a.createElement(Q.a,{disableHeight:!0},(function(e){var i=e.width;return u.a.createElement(U,{focusableBounds:{x:0,y:500,width:i,height:200},focusableKey:t},u.a.createElement(se,Object.assign({height:200,itemCount:100,itemSize:200,ref:o,width:i,layout:"horizontal"},n),(function(e){return u.a.createElement(ne,Object.assign({focusableBounds:{x:200*e.index,y:0,width:200,height:200},onFocus:s},e))})))}))},ue=n(7),re=["defaultFocus","title"],ce=Y.a.span(_||(_=Object(q.a)(["\n    border: 1px solid rgba(0, 147, 255, ",");\n    border-radius: 10px;\n    height: auto;\n    padding: 10px 20px;\n    margin: 0px 10px;\n    font-size: 20pt;\n"])),(function(e){return e.isFocused?1:.4})),ae=function(e){var t=e.defaultFocus,n=e.title,o=Object(J.a)(e,re),s=Object(i.useState)(null),r=Object(ue.a)(s,2),c=r[0],a=r[1],l=Object(i.useCallback)((function(e){a(e.getBoundingClientRect()||null)}),[]);return u.a.createElement(W,{defaultFocus:t,focusableBounds:c,focusableKey:n.toLowerCase()},(function(e){return u.a.createElement(ce,Object.assign({},o,{isFocused:e.isFocused,ref:l}),n)}))},le=Y.a.div(m||(m=Object(q.a)(["\n    width: 100%;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    box-sizing: border-box;\n"]))),fe=function(){var e=Object(i.useState)(null),t=Object(ue.a)(e,2),n=t[0],o=t[1],s=Object(i.useCallback)((function(e){o(e.getBoundingClientRect()||null)}),[]);return u.a.createElement(U,{focusableBounds:n,focusableKey:"menu"},u.a.createElement(le,{ref:s},u.a.createElement(ae,{title:"Home"}),u.a.createElement(ae,{title:"Movies"}),u.a.createElement(ae,{title:"Series"})))},be=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(Z,{interactive:!0}),u.a.createElement(fe,null),u.a.createElement(U,{focusableBounds:{x:0,y:70,width:300,height:100},focusableKey:"container"},u.a.createElement(W,{focusableBounds:{x:0,y:0,width:300,height:50},focusableKey:"button"},(function(e){return u.a.createElement("p",{style:{color:e.isFocused?"red":"black"}},"ahoj")}))),u.a.createElement(ie,{focusableKey:"first"}))};c.a.render(u.a.createElement(be,null),document.getElementById("root")),document.onkeyup=function(e){switch(e.key){case"ArrowDown":H.down();break;case"ArrowLeft":H.left();break;case"ArrowRight":H.right();break;case"ArrowUp":H.up();break;case"f":C.stepForward();break;case"b":C.stepBackward()}}}},[[18,1,2]]]);
//# sourceMappingURL=main.37fb4563.chunk.js.map